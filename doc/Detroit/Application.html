<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Detroit::Application
  
    &mdash; Detroit
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Detroit.html" title="Detroit (module)">Detroit</a></span></span>
     &raquo; 
    <span class="title">Application</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Detroit::Application
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Detroit::Application</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/detroit/application.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Application class is the main controller class for running a session of
Detroit. – TODO: Rename Application to `Session`? ++</p>


  </div>
</div>
<div class="tags">
  
</div>

  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- (Object) <strong>options</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Options (generally from #cli).</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_services-instance_method" title="#active_services (instance method)">- (Object) <strong>active_services</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Active services are services defined in schedule files and do not have
their active setting turned off.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ansize-instance_method" title="#ansize (instance method)">- (Object) <strong>ansize</strong>(text, code) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assembly-instance_method" title="#assembly (instance method)">- (Object) <strong>assembly</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The selected assembly system.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#common_tool_options-instance_method" title="#common_tool_options (instance method)">- (Object) <strong>common_tool_options</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>TODO: Do we need verbose?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Object) <strong>config</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Detroit configuration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#config_template-instance_method" title="#config_template (instance method)">- (Object) <strong>config_template</strong>(name = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates a configuration template for particular tool or all tools.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#defaults-instance_method" title="#defaults (instance method)">- (Object) <strong>defaults</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>User-defined service defaults.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#display_action-instance_method" title="#display_action (instance method)">- (Object) <strong>display_action</strong>(action_item) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_stops-instance_method" title="#end_stops (instance method)">- (Object) <strong>end_stops</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a list of all terminal stops, i.e.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hook_directory-instance_method" title="#hook_directory (instance method)">- (Object) <strong>hook_directory</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a project’s Detroit hooks directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hook_tool-instance_method" title="#hook_tool (instance method)">- (Object) <strong>hook_tool</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Application) <strong>initialize</strong>(options) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new Detroit Application instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#multitask%3F-instance_method" title="#multitask? (instance method)">- (Boolean) <strong>multitask?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Multitask mode?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#overview-instance_method" title="#overview (instance method)">- (Object) <strong>overview</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Give an overview of stops this track supports.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_header-instance_method" title="#print_header (instance method)">- (Object) <strong>print_header</strong>(left, right) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_phase-instance_method" title="#print_phase (instance method)">- (Object) <strong>print_phase</strong>(left, right) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#printline-instance_method" title="#printline (instance method)">- (Object) <strong>printline</strong>(left, right = '', options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project-instance_method" title="#project (instance method)">- (Object) <strong>project</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provides access to the Project instance via `Detroit.project` class method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quiet%3F-instance_method" title="#quiet? (instance method)">- (Boolean) <strong>quiet?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Quiet mode?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong>(track_and_stop) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Run up to the specified <tt>track_and_stop</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_a_service-instance_method" title="#run_a_service (instance method)">- (Object) <strong>run_a_service</strong>(srv, track, stop) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Run a service given the service, track name and stop name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schedules-instance_method" title="#schedules (instance method)">- (Object) <strong>schedules</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#screen_width-instance_method" title="#screen_width (instance method)">- (Object) <strong>screen_width</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#service_calls-instance_method" title="#service_calls (instance method)">- (Object) <strong>service_calls</strong>(track, stop) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Make service calls.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#service_hooks-instance_method" title="#service_hooks (instance method)">- (Object) <strong>service_hooks</strong>(track, stop) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Execute service hook for given track and destination.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip-instance_method" title="#skip (instance method)">- (Object) <strong>skip</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a list of services to skip as specificed on the commandline.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">- (Object) <strong>start</strong>(stop) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Start the run.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status_header-instance_method" title="#status_header (instance method)">- (Object) <strong>status_header</strong>(left, right = '') </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Print a status header, which consists of project name and version on the
left and stop location on the right.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status_line-instance_method" title="#status_line (instance method)">- (Object) <strong>status_line</strong>(left, right = '') </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Print a status line, which consists of service name on the left and stop
name on the right.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Detroit::Application (class)">Application</a></span></tt>) <strong>initialize</strong>(options) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Create a new Detroit Application instance.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 17</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span>
  <span class='comment val'>#load_standard_plugins</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="options-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="options-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>options</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Options (generally from #cli).</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 14</span>

<span class='def def kw'>def</span> <span class='options identifier id'>options</span>
  <span class='@options ivar id'>@options</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="active_services-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>active_services</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Active services are services defined in schedule files and do not have
their active setting turned off.</p>

<p>Returns Array of active services.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 99</span>

<span class='def def kw'>def</span> <span class='active_services identifier id'>active_services</span>
  <span class='@active_services ivar id'>@active_services</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span>
    <span class='activelist identifier id'>activelist</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

    <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='bitor op'>|</span>
      <span class='next next kw'>next</span> <span class='unless unless_mod kw'>unless</span> <span class='opts identifier id'>opts</span> <span class='andop op'>&amp;&amp;</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='string val'>'active'</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span>

      <span class='comment val'># omit any service in the skip list</span>
      <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='skip identifier id'>skip</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>

      <span class='tool_name identifier id'>tool_name</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='string val'>'tool'</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='string val'>'service'</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span>

      <span class='unless unless kw'>unless</span> <span class='Detroit constant id'>Detroit</span><span class='dot token'>.</span><span class='tools identifier id'>tools</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='tool_name identifier id'>tool_name</span><span class='rparen token'>)</span>
        <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='load_plugin identifier id'>load_plugin</span><span class='lparen token'>(</span><span class='tool_name identifier id'>tool_name</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='tool_class identifier id'>tool_class</span> <span class='assign token'>=</span> <span class='Detroit constant id'>Detroit</span><span class='dot token'>.</span><span class='tools identifier id'>tools</span><span class='lbrack token'>[</span><span class='tool_name identifier id'>tool_name</span><span class='rbrack token'>]</span>

      <span class='abort identifier id'>abort</span> <span class='dstring node'>&quot;Unknown tool `#{tool_name}'.&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='tool_class identifier id'>tool_class</span>

      <span class='if if kw'>if</span> <span class='tool_class identifier id'>tool_class</span><span class='dot token'>.</span><span class='available? fid id'>available?</span> <span class='comment val'>#(project)</span>
        <span class='comment val'>#opts = inject_environment(opts) # TODO: DEPRECATE</span>
        <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='tool_name identifier id'>tool_name</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_h identifier id'>to_h</span>
        <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='common_tool_options identifier id'>common_tool_options</span><span class='rparen token'>)</span>
        <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
        <span class='comment val'>#activelist &lt;&lt; tool_class.new(key, options) #script,</span>
        <span class='comment val'>## remove any services specified by the --skip option on the comamndline</span>
        <span class='activelist identifier id'>activelist</span> <span class='lshft op'>&lt;&lt;</span> <span class='ServiceWrapper constant id'>ServiceWrapper</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='tool_class identifier id'>tool_class</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#script,</span>
      <span class='comment val'>#else</span>
      <span class='comment val'>#  warn &quot;Service #{tool_class} is not available.&quot;</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># sorting here trickles down to processing later</span>
    <span class='activelist identifier id'>activelist</span> <span class='assign token'>=</span> <span class='activelist identifier id'>activelist</span><span class='dot token'>.</span><span class='sort_by identifier id'>sort_by</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='s identifier id'>s</span><span class='dot token'>.</span><span class='priority identifier id'>priority</span> <span class='orop op'>||</span> <span class='integer val'>0</span> <span class='rbrace token'>}</span>

    <span class='activelist identifier id'>activelist</span>
  <span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ansize-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ansize</strong>(text, code) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


411
412
413
414
415
416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 411</span>

<span class='def def kw'>def</span> <span class='ansize identifier id'>ansize</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='code identifier id'>code</span><span class='rparen token'>)</span>
  <span class='comment val'>#return text unless text.color</span>
  <span class='if if kw'>if</span> <span class='RUBY_PLATFORM constant id'>RUBY_PLATFORM</span> <span class='match op'>=~</span> <span class='regexp val'>/win/</span>
    <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='else else kw'>else</span>
    <span class='ANSI constant id'>ANSI</span><span class='colon2 op'>::</span><span class='Code constant id'>Code</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='code identifier id'>code</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='text identifier id'>text</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="assembly-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>assembly</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The selected assembly system.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 35</span>

<span class='def def kw'>def</span> <span class='assembly identifier id'>assembly</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:assembly</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='DEFAULT_ASSEMBLY constant id'>DEFAULT_ASSEMBLY</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="common_tool_options-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>common_tool_options</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>TODO: Do we need verbose?</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253
254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 251</span>

<span class='def def kw'>def</span> <span class='common_tool_options identifier id'>common_tool_options</span>
  <span class='lbrace token'>{</span>
    <span class='string val'>'project'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='project identifier id'>project</span><span class='comma token'>,</span>
    <span class='string val'>'trial'</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:trial</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='string val'>'trace'</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:trace</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='string val'>'quiet'</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:quiet</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='string val'>'force'</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:force</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='string val'>'verbose'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="config-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>config</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Detroit configuration.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 60</span>

<span class='def def kw'>def</span> <span class='config identifier id'>config</span>
  <span class='@config ivar id'>@config</span> <span class='opasgn op'>||=</span> <span class='Detroit constant id'>Detroit</span><span class='colon2 op'>::</span><span class='Config constant id'>Config</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='schedules identifier id'>schedules</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="config_template-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>config_template</strong>(name = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Generates a configuration template for particular tool or all tools. This
is only used for reference purposes.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 78</span>

<span class='def def kw'>def</span> <span class='config_template identifier id'>config_template</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='name identifier id'>name</span>
    <span class='list identifier id'>list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='Detroit constant id'>Detroit</span><span class='dot token'>.</span><span class='tools identifier id'>tools</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='list identifier id'>list</span> <span class='assign token'>=</span> <span class='Detroit constant id'>Detroit</span><span class='dot token'>.</span><span class='tools identifier id'>tools</span>
  <span class='end end kw'>end</span>
  <span class='cfg identifier id'>cfg</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='list identifier id'>list</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='srv_name identifier id'>srv_name</span><span class='comma token'>,</span> <span class='srv_class identifier id'>srv_class</span><span class='bitor op'>|</span>
    <span class='attrs identifier id'>attrs</span> <span class='assign token'>=</span> <span class='srv_class identifier id'>srv_class</span><span class='dot token'>.</span><span class='options identifier id'>options</span> <span class='comment val'>#instance_methods.select{ |m| m.to_s =~ /\w+=$/ &amp;&amp; !%w{taguri=}.include?(m.to_s) }</span>
    <span class='atcfg identifier id'>atcfg</span> <span class='assign token'>=</span> <span class='attrs identifier id'>attrs</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='h identifier id'>h</span><span class='comma token'>,</span> <span class='m identifier id'>m</span><span class='bitor op'>|</span> <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='m identifier id'>m</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span><span class='lparen token'>(</span><span class='string val'>'='</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='semicolon token'>;</span> <span class='h identifier id'>h</span> <span class='rbrace token'>}</span>
    <span class='atcfg identifier id'>atcfg</span><span class='lbrack token'>[</span><span class='string val'>'service'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='srv_class identifier id'>srv_class</span><span class='dot token'>.</span><span class='basename identifier id'>basename</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span>
    <span class='atcfg identifier id'>atcfg</span><span class='lbrack token'>[</span><span class='string val'>'active'</span><span class='rbrack token'>]</span>  <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='cfg identifier id'>cfg</span><span class='lbrack token'>[</span><span class='srv_name identifier id'>srv_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='atcfg identifier id'>atcfg</span>
  <span class='end end kw'>end</span>
  <span class='cfg identifier id'>cfg</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="defaults-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>defaults</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>User-defined service defaults.</p>

<p>Returns Hash of service defaults.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 72</span>

<span class='def def kw'>def</span> <span class='defaults identifier id'>defaults</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='defaults identifier id'>defaults</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="display_action-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>display_action</strong>(action_item) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 350</span>

<span class='def def kw'>def</span> <span class='display_action identifier id'>display_action</span><span class='lparen token'>(</span><span class='action_item identifier id'>action_item</span><span class='rparen token'>)</span>
  <span class='phase identifier id'>phase</span><span class='comma token'>,</span> <span class='service identifier id'>service</span><span class='comma token'>,</span> <span class='action identifier id'>action</span><span class='comma token'>,</span> <span class='parameters identifier id'>parameters</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='action_item identifier id'>action_item</span>
  <span class='puts identifier id'>puts</span> <span class='string val'>&quot;  %-10s %-10s %-10s&quot;</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='phase identifier id'>phase</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span><span class='comma token'>,</span> <span class='service identifier id'>service</span><span class='dot token'>.</span><span class='service_title identifier id'>service_title</span><span class='comma token'>,</span> <span class='action identifier id'>action</span><span class='rbrack token'>]</span>
  <span class='comment val'>#status_line(service.service_title, phase.to_s.capitalize)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="end_stops-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>end_stops</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns a list of all terminal stops, i.e. stops at a tracks end. FIXME:
stop_map is not defined.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


302
303
304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 302</span>

<span class='def def kw'>def</span> <span class='end_stops identifier id'>end_stops</span>
  <span class='lparen token'>(</span><span class='stop_map identifier id'>stop_map</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span> <span class='minus op'>-</span> <span class='stop_map identifier id'>stop_map</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="hook_directory-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>hook_directory</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns a project’s Detroit hooks directory.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 241</span>

<span class='def def kw'>def</span> <span class='hook_directory identifier id'>hook_directory</span>
  <span class='dir identifier id'>dir</span>  <span class='assign token'>=</span> <span class='project identifier id'>project</span><span class='dot token'>.</span><span class='root identifier id'>root</span><span class='dot token'>.</span><span class='glob identifier id'>glob</span><span class='lparen token'>(</span><span class='string val'>&quot;{.,}detroit/hooks&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="hook_tool-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>hook_tool</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 246</span>

<span class='def def kw'>def</span> <span class='hook_tool identifier id'>hook_tool</span>
  <span class='@hook_tool ivar id'>@hook_tool</span> <span class='opasgn op'>||=</span> <span class='Tool constant id'>Tool</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='common_tool_options identifier id'>common_tool_options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="multitask?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>multitask?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Multitask mode?</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 45</span>

<span class='def def kw'>def</span> <span class='multitask? fid id'>multitask?</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:multitask</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='Parallel constant id'>Parallel</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="overview-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>overview</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Give an overview of stops this track supports. FIXME: end_stops blows up.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310
311
312
313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 308</span>

<span class='def def kw'>def</span> <span class='overview identifier id'>overview</span>
  <span class='end_stops identifier id'>end_stops</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='stop_name identifier id'>stop_name</span><span class='bitor op'>|</span>
    <span class='action_plan identifier id'>action_plan</span><span class='lparen token'>(</span><span class='stop_name identifier id'>stop_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='act identifier id'>act</span><span class='bitor op'>|</span>
      <span class='display_action identifier id'>display_action</span><span class='lparen token'>(</span><span class='act identifier id'>act</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='puts identifier id'>puts</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="print_header-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>print_header</strong>(left, right) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


357
358
359
360
361
362
363
364
365</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 357</span>

<span class='def def kw'>def</span> <span class='print_header identifier id'>print_header</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='ANSI constant id'>ANSI</span><span class='colon2 op'>::</span><span class='SUPPORTED constant id'>SUPPORTED</span>
    <span class='printline identifier id'>printline</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='comma token'>,</span> <span class='symbol val'>:pad=</span><span class='gt op'>&gt;</span><span class='integer val'>1</span><span class='comma token'>,</span> <span class='symbol val'>:sep=</span><span class='gt op'>&gt;</span><span class='string val'>' '</span><span class='comma token'>,</span> <span class='symbol val'>:style=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:negative</span><span class='comma token'>,</span> <span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:left=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:right=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='printline identifier id'>printline</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='comma token'>,</span> <span class='symbol val'>:pad=</span><span class='gt op'>&gt;</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='symbol val'>:sep=</span><span class='gt op'>&gt;</span><span class='string val'>' '</span><span class='comma token'>,</span> <span class='symbol val'>:style=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:negative</span><span class='comma token'>,</span> <span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:left=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:right=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='printline identifier id'>printline</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='comma token'>,</span> <span class='symbol val'>:pad=</span><span class='gt op'>&gt;</span><span class='integer val'>1</span><span class='comma token'>,</span> <span class='symbol val'>:sep=</span><span class='gt op'>&gt;</span><span class='string val'>' '</span><span class='comma token'>,</span> <span class='symbol val'>:style=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:negative</span><span class='comma token'>,</span> <span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:left=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:right=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='printline identifier id'>printline</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='comma token'>,</span> <span class='symbol val'>:pad=</span><span class='gt op'>&gt;</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='symbol val'>:sep=</span><span class='gt op'>&gt;</span><span class='string val'>'='</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="print_phase-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>print_phase</strong>(left, right) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


368
369
370
371
372
373
374</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 368</span>

<span class='def def kw'>def</span> <span class='print_phase identifier id'>print_phase</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='ANSI constant id'>ANSI</span><span class='colon2 op'>::</span><span class='SUPPORTED constant id'>SUPPORTED</span>
    <span class='printline identifier id'>printline</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='comma token'>,</span> <span class='symbol val'>:pad=</span><span class='gt op'>&gt;</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='symbol val'>:sep=</span><span class='gt op'>&gt;</span><span class='string val'>' '</span><span class='comma token'>,</span> <span class='symbol val'>:style=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:on_white</span><span class='comma token'>,</span> <span class='symbol val'>:black</span><span class='comma token'>,</span> <span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:left=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:right=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:bold</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='printline identifier id'>printline</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='comma token'>,</span> <span class='symbol val'>:pad=</span><span class='gt op'>&gt;</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='symbol val'>:sep=</span><span class='gt op'>&gt;</span><span class='string val'>'-'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="printline-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>printline</strong>(left, right = '', options = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 377</span>

<span class='def def kw'>def</span> <span class='printline identifier id'>printline</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='assign token'>=</span><span class='string val'>''</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='quiet? fid id'>quiet?</span>

  <span class='separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:seperator</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:sep</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>' '</span>
  <span class='padding identifier id'>padding</span>   <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:padding</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:pad</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>0</span>

  <span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span> <span class='assign token'>=</span> <span class='left identifier id'>left</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>

  <span class='left_size identifier id'>left_size</span>  <span class='assign token'>=</span> <span class='left identifier id'>left</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='right_size identifier id'>right_size</span> <span class='assign token'>=</span> <span class='right identifier id'>right</span><span class='dot token'>.</span><span class='size identifier id'>size</span>

  <span class='comment val'>#left  = colorize(left)</span>
  <span class='comment val'>#right = colorize(right)</span>

  <span class='l identifier id'>l</span> <span class='assign token'>=</span> <span class='padding identifier id'>padding</span>
  <span class='r identifier id'>r</span> <span class='assign token'>=</span> <span class='minus op'>-</span><span class='lparen token'>(</span><span class='right_size identifier id'>right_size</span> <span class='plus op'>+</span> <span class='padding identifier id'>padding</span><span class='rparen token'>)</span>

  <span class='style identifier id'>style</span>  <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:style</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='lstyle identifier id'>lstyle</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:left</span><span class='rbrack token'>]</span>  <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rstyle identifier id'>rstyle</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:right</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='left identifier id'>left</span>  <span class='assign token'>=</span> <span class='lstyle identifier id'>lstyle</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='ansize identifier id'>ansize</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='right identifier id'>right</span> <span class='assign token'>=</span> <span class='rstyle identifier id'>rstyle</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='right identifier id'>right</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='ansize identifier id'>ansize</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

  <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='separator identifier id'>separator</span> <span class='mult op'>*</span> <span class='screen_width identifier id'>screen_width</span>
  <span class='line identifier id'>line</span><span class='lbrack token'>[</span><span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='left_size identifier id'>left_size</span><span class='rbrack token'>]</span>  <span class='assign token'>=</span> <span class='left identifier id'>left</span>  <span class='if if_mod kw'>if</span> <span class='left_size identifier id'>left_size</span> <span class='neq op'>!=</span> <span class='integer val'>0</span>
  <span class='line identifier id'>line</span><span class='lbrack token'>[</span><span class='r identifier id'>r</span><span class='comma token'>,</span> <span class='right_size identifier id'>right_size</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='right identifier id'>right</span> <span class='if if_mod kw'>if</span> <span class='right_size identifier id'>right_size</span> <span class='neq op'>!=</span> <span class='integer val'>0</span>

  <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='style identifier id'>style</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='line identifier id'>line</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='ansize identifier id'>ansize</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

  <span class='puts identifier id'>puts</span> <span class='line identifier id'>line</span> <span class='plus op'>+</span> <span class='ansize identifier id'>ansize</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='comma token'>,</span> <span class='symbol val'>:clear</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="project-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>project</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Provides access to the Project instance via `Detroit.project` class method.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 65</span>

<span class='def def kw'>def</span> <span class='project identifier id'>project</span>
  <span class='@project ivar id'>@project</span> <span class='opasgn op'>||=</span> <span class='POM constant id'>POM</span><span class='colon2 op'>::</span><span class='Project constant id'>Project</span><span class='dot token'>.</span><span class='find identifier id'>find</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quiet?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>quiet?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Quiet mode?</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 40</span>

<span class='def def kw'>def</span> <span class='quiet? fid id'>quiet?</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:quiet</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>run</strong>(track_and_stop) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Run up to the specified <tt>track_and_stop</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 164</span>

<span class='def def kw'>def</span> <span class='run identifier id'>run</span><span class='lparen token'>(</span><span class='track_and_stop identifier id'>track_and_stop</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Malformed destination -- #{track_and_stop}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='regexp val'>/^\w+\:{0,1}\w+$/</span> <span class='match op'>=~</span> <span class='track_and_stop identifier id'>track_and_stop</span>

  <span class='if if kw'>if</span> <span class='track_and_stop identifier id'>track_and_stop</span>
    <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span> <span class='assign token'>=</span> <span class='track_and_stop identifier id'>track_and_stop</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>':'</span><span class='rparen token'>)</span>
    <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span> <span class='assign token'>=</span> <span class='string val'>'main'</span><span class='comma token'>,</span> <span class='name identifier id'>name</span> <span class='unless unless_mod kw'>unless</span> <span class='stop identifier id'>stop</span>
  <span class='else else kw'>else</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>'main'</span>
    <span class='stop identifier id'>stop</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>

  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
  <span class='stop identifier id'>stop</span> <span class='assign token'>=</span> <span class='stop identifier id'>stop</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span> <span class='if if_mod kw'>if</span> <span class='stop identifier id'>stop</span>

  <span class='assm identifier id'>assm</span> <span class='assign token'>=</span> <span class='Detroit constant id'>Detroit</span><span class='dot token'>.</span><span class='assemblies identifier id'>assemblies</span><span class='lbrack token'>[</span><span class='assembly identifier id'>assembly</span><span class='rbrack token'>]</span>

  <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Unkown assembly `#{assembly}'&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='assm identifier id'>assm</span>

  <span class='track identifier id'>track</span> <span class='assign token'>=</span> <span class='assm identifier id'>assm</span><span class='dot token'>.</span><span class='get_track identifier id'>get_track</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span><span class='rparen token'>)</span>

  <span class='comment val'>#if stop</span>
  <span class='comment val'>#  system = track.route_with_stop(stop)</span>
  <span class='comment val'>#  raise &quot;Unknown stop -- #{stop}&quot; unless system</span>

  <span class='if if kw'>if</span> <span class='not not kw'>not</span> <span class='track identifier id'>track</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
    <span class='comment val'>#overview</span>
    <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;Unknown stop for track `#{name}'.&quot;</span>
    <span class='exit identifier id'>exit</span> <span class='integer val'>0</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># prime the services (so as to fail early)</span>
  <span class='active_services identifier id'>active_services</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='srv identifier id'>srv</span><span class='bitor op'>|</span>
    <span class='srv identifier id'>srv</span><span class='dot token'>.</span><span class='preconfigure identifier id'>preconfigure</span> <span class='if if_mod kw'>if</span> <span class='srv identifier id'>srv</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='string val'>&quot;preconfigure&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='multitask? fid id'>multitask?</span>
    <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='dstring node'>&quot;#{project.metadata.title} v#{project.metadata.version}   [M]&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{project.root}&quot;</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='dstring node'>&quot;#{project.metadata.title} v#{project.metadata.version}&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{project.root}&quot;</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  <span class='status_header identifier id'>status_header</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='h identifier id'>h</span><span class='rparen token'>)</span>

  <span class='start_time identifier id'>start_time</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>

  <span class='track identifier id'>track</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='run_stop identifier id'>run_stop</span><span class='bitor op'>|</span>
    <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='skip identifier id'>skip</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{run_stop}&quot;</span><span class='rparen token'>)</span>  <span class='comment val'># TODO: Should we really allow skipping stops?</span>
    <span class='service_hooks identifier id'>service_hooks</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='string val'>'pre_'</span> <span class='plus op'>+</span> <span class='run_stop identifier id'>run_stop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='service_calls identifier id'>service_calls</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='string val'>'pre_'</span> <span class='plus op'>+</span> <span class='run_stop identifier id'>run_stop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='service_calls identifier id'>service_calls</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='run_stop identifier id'>run_stop</span><span class='rparen token'>)</span>
    <span class='service_calls identifier id'>service_calls</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='string val'>'aft_'</span> <span class='plus op'>+</span> <span class='run_stop identifier id'>run_stop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='service_hooks identifier id'>service_hooks</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='string val'>'aft_'</span> <span class='plus op'>+</span> <span class='run_stop identifier id'>run_stop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='stop identifier id'>stop</span> <span class='eq op'>==</span> <span class='run_stop identifier id'>run_stop</span>
  <span class='end end kw'>end</span>

  <span class='stop_time identifier id'>stop_time</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
  <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;\nFinished in #{stop_time - start_time} seconds.&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='quiet? fid id'>quiet?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run_a_service-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>run_a_service</strong>(srv, track, stop) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Run a service given the service, track name and stop name.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


285
286
287
288
289
290
291
292
293
294
295
296
297
298</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 285</span>

<span class='def def kw'>def</span> <span class='run_a_service identifier id'>run_a_service</span><span class='lparen token'>(</span><span class='srv identifier id'>srv</span><span class='comma token'>,</span> <span class='track identifier id'>track</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
  <span class='comment val'># run if the service supports the track and stop.</span>
  <span class='comment val'>#if srv.respond_to?(&quot;#{track}_#{stop}&quot;)</span>
  <span class='if if kw'>if</span> <span class='srv identifier id'>srv</span><span class='dot token'>.</span><span class='stop? fid id'>stop?</span><span class='lparen token'>(</span><span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>
      <span class='comment val'>#status_line(&quot;#{srv.key.to_s} (#{srv.class}##{track}_#{stop})&quot;, stop.to_s.gsub('_', '-').capitalize)</span>
      <span class='status_line identifier id'>status_line</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{srv.key.to_s} (#{srv.class}##{stop})&quot;</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='string val'>'_'</span><span class='comma token'>,</span> <span class='string val'>'-'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='status_line identifier id'>status_line</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{srv.key.to_s}&quot;</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='string val'>'_'</span><span class='comma token'>,</span> <span class='string val'>'-'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='comment val'>#srv.__send__(&quot;#{track}_#{stop}&quot;)</span>
    <span class='srv identifier id'>srv</span><span class='dot token'>.</span><span class='invoke identifier id'>invoke</span><span class='lparen token'>(</span><span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="schedules-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>schedules</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 55</span>

<span class='def def kw'>def</span> <span class='schedules identifier id'>schedules</span>
  <span class='@schedules ivar id'>@schedules</span> <span class='opasgn op'>||=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:schedules</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="screen_width-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>screen_width</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


421
422
423</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 421</span>

<span class='def def kw'>def</span> <span class='screen_width identifier id'>screen_width</span>
  <span class='ANSI constant id'>ANSI</span><span class='colon2 op'>::</span><span class='Terminal constant id'>Terminal</span><span class='dot token'>.</span><span class='terminal_width identifier id'>terminal_width</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="service_calls-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>service_calls</strong>(track, stop) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Make service calls.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 263</span>

<span class='def def kw'>def</span> <span class='service_calls identifier id'>service_calls</span><span class='lparen token'>(</span><span class='track identifier id'>track</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
  <span class='prioritized_services identifier id'>prioritized_services</span> <span class='assign token'>=</span> <span class='active_services identifier id'>active_services</span><span class='dot token'>.</span><span class='group_by identifier id'>group_by</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='srv identifier id'>srv</span><span class='bitor op'>|</span> <span class='srv identifier id'>srv</span><span class='dot token'>.</span><span class='priority identifier id'>priority</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='sort_by identifier id'>sort_by</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='k identifier id'>k</span> <span class='rbrace token'>}</span>
  <span class='prioritized_services identifier id'>prioritized_services</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='lparen token'>(</span><span class='priority identifier id'>priority</span><span class='comma token'>,</span> <span class='services identifier id'>services</span><span class='rparen token'>)</span><span class='bitor op'>|</span>
    <span class='comment val'>## remove any services specified by the --skip option on the comamndline</span>
    <span class='comment val'>#services = services.reject{ |srv| skip.include?(srv.key.to_s) }</span>
    <span class='comment val'>## only servies that are on the track</span>
    <span class='services identifier id'>services</span> <span class='assign token'>=</span> <span class='services identifier id'>services</span><span class='dot token'>.</span><span class='select identifier id'>select</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='srv identifier id'>srv</span><span class='bitor op'>|</span> <span class='srv identifier id'>srv</span><span class='dot token'>.</span><span class='tracks identifier id'>tracks</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='or or kw'>or</span> <span class='srv identifier id'>srv</span><span class='dot token'>.</span><span class='tracks identifier id'>tracks</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='track identifier id'>track</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

    <span class='tasklist identifier id'>tasklist</span> <span class='assign token'>=</span> <span class='services identifier id'>services</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='srv identifier id'>srv</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span><span class='srv identifier id'>srv</span><span class='comma token'>,</span> <span class='track identifier id'>track</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
    <span class='if if kw'>if</span> <span class='multitask? fid id'>multitask?</span>
      <span class='results identifier id'>results</span> <span class='assign token'>=</span> <span class='Parallel constant id'>Parallel</span><span class='dot token'>.</span><span class='in_processes identifier id'>in_processes</span><span class='lparen token'>(</span><span class='tasklist identifier id'>tasklist</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='bitor op'>|</span>
        <span class='run_a_service identifier id'>run_a_service</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='tasklist identifier id'>tasklist</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='tasklist identifier id'>tasklist</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='args identifier id'>args</span><span class='bitor op'>|</span>
        <span class='run_a_service identifier id'>run_a_service</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="service_hooks-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>service_hooks</strong>(track, stop) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Execute service hook for given track and destination. – TODO: Deprecate
service hooks?</p>

<p>TODO: Currently only stop counts, maybe add track subdirs. ++</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230
231
232
233
234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 228</span>

<span class='def def kw'>def</span> <span class='service_hooks identifier id'>service_hooks</span><span class='lparen token'>(</span><span class='track identifier id'>track</span><span class='comma token'>,</span> <span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
   <span class='comment val'>#hook = dir + (&quot;#{track}/#{stop}.rb&quot;.gsub('_', '-'))</span>
   <span class='dir identifier id'>dir</span>  <span class='assign token'>=</span> <span class='hook_directory identifier id'>hook_directory</span>
   <span class='return return kw'>return</span> <span class='unless unless_mod kw'>unless</span> <span class='dir identifier id'>dir</span>
   <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='stop identifier id'>stop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='string val'>'_'</span><span class='comma token'>,</span> <span class='string val'>'-'</span><span class='rparen token'>)</span>
   <span class='hook identifier id'>hook</span> <span class='assign token'>=</span> <span class='dir identifier id'>dir</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;#{name}.rb&quot;</span>
   <span class='if if kw'>if</span> <span class='hook identifier id'>hook</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span>
     <span class='status_line identifier id'>status_line</span><span class='lparen token'>(</span><span class='string val'>&quot;hook&quot;</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span><span class='rparen token'>)</span>
     <span class='hook_tool identifier id'>hook_tool</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='hook identifier id'>hook</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='rparen token'>)</span>
   <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="skip-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>skip</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns a list of services to skip as specificed on the commandline.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 50</span>

<span class='def def kw'>def</span> <span class='skip identifier id'>skip</span>
  <span class='@skip ivar id'>@skip</span> <span class='opasgn op'>||=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:skip</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_list identifier id'>to_list</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='s identifier id'>s</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>(stop) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Start the run.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 157</span>

<span class='def def kw'>def</span> <span class='start identifier id'>start</span><span class='lparen token'>(</span><span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
  <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='chdir identifier id'>chdir</span><span class='lparen token'>(</span><span class='project identifier id'>project</span><span class='dot token'>.</span><span class='root identifier id'>root</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>       <span class='comment val'># change into project directory</span>
    <span class='run identifier id'>run</span><span class='lparen token'>(</span><span class='stop identifier id'>stop</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="status_header-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>status_header</strong>(left, right = '') 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Print a status header, which consists of project name and version on the
left and stop location on the right.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324
325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 322</span>

<span class='def def kw'>def</span> <span class='status_header identifier id'>status_header</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='assign token'>=</span><span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span> <span class='assign token'>=</span> <span class='left identifier id'>left</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='comment val'>#left.color  = 'blue'</span>
  <span class='comment val'>#right.color = 'magenta'</span>
  <span class='unless unless kw'>unless</span> <span class='quiet? fid id'>quiet?</span>
    <span class='puts identifier id'>puts</span>
    <span class='print_header identifier id'>print_header</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='rparen token'>)</span>
    <span class='comment val'>#puts &quot;=&quot; * io.screen_width</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="status_line-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>status_line</strong>(left, right = '') 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Print a status line, which consists of service name on the left and stop
name on the right.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338
339
340
341
342
343
344
345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/detroit/application.rb', line 336</span>

<span class='def def kw'>def</span> <span class='status_line identifier id'>status_line</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='assign token'>=</span><span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span> <span class='assign token'>=</span> <span class='left identifier id'>left</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='comment val'>#left.color  = 'blue'</span>
  <span class='comment val'>#right.color = 'magenta'</span>
  <span class='unless unless kw'>unless</span> <span class='quiet? fid id'>quiet?</span>
    <span class='puts identifier id'>puts</span>
    <span class='comment val'>#puts &quot;-&quot; * io.screen_width</span>
    <span class='print_phase identifier id'>print_phase</span><span class='lparen token'>(</span><span class='left identifier id'>left</span><span class='comma token'>,</span> <span class='right identifier id'>right</span><span class='rparen token'>)</span>
    <span class='comment val'>#puts &quot;-&quot; * io.screen_width</span>
    <span class='comment val'>#puts</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Jun 29 06:56:12 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.8.7).
</div>

  </body>
</html>