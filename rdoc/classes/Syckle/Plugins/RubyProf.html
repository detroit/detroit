<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: Syckle::Plugins::RubyProf</title>

  
    <link rel="SHORTCUT ICON" href="../../../assets/icon/class.png">
  

  <link type="text/css" rel="stylesheet" href="../../../assets/rdoc.css" media="screen" />
  <link type="text/css" rel="stylesheet" href="../../../assets/highlight/styles/github.css" title="GitHub" />

  <script type="text/javascript" charset="utf-8" src="../../../assets/jquery.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../../assets/highlight/highlight.pack.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../../assets/quicksearch.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../../assets/main.js"></script>

  <script type="text/javascript">
    $(document).ready( function() {
      hookHighlightSyntax();
	    hookSourceViews();
	    hookDebuggingToggle();
	    hookQuickSearch();
	    highlightLocationTarget();

	    $('ul.link-list a').bind("click", highlightClickTarget);
    });
  </script>
</head>
<body class="class">
<div id="main">

  <div class="head">
    <h1>
      
        <img src="../../../assets/icon/class.png" align="absmiddle">&nbsp;
      
      <a href="../../../index.html">Syckle</a>&nbsp;
      <a href="/">Syckle::Plugins::RubyProf</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="../../../files/lib/plugin/syckle/rubyprof_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/plugin/syckle/rubyprof.rb">lib/plugin/syckle/rubyprof.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->
      <!-- TODO: generalize this for all SCMs -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        <ul>
          
          <li class="class">Service</li>
          
        </ul>
      </div>
      

      <!-- Namespace Contents -->
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
            
            <li class="method">
              <a href="#M000072">#analyize</a>
            </li>
          
            
            <li class="method">
              <a href="#M000074">#clean</a>
            </li>
          
            
            <li class="method">
              <a href="#M000071">#initialize_defaults</a>
            </li>
          
            
            <li class="method">
              <a href="#M000073">#reset</a>
            </li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Information</h3>
        <ul>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/homepage.html">homepage</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/ruby.html">ruby</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/license.html">license</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/email_reap.html">email.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/repository.html">repository</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/rubyforge_reap.html">rubyforge.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/title.html">title</a></li>
        
          <li class="file"><a href="../../../files/Syckfile.html">Syckfile</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/project.html">project</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/syntax_reap.html">syntax.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/authors.html">authors</a></li>
        
          <li class="file"><a href="../../../files/TODO.html">TODO</a></li>
        
          <li class="file"><a href="../../../files/README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/ridoc_reap.html">ridoc.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/rdoc_reap.html">rdoc.reap</a></li>
        
          <li class="file"><a href="../../../files/COPYING.html">COPYING</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/created.html">created</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/rubygems_reap.html">rubygems.reap</a></li>
        
          <li class="file"><a href="../../../files/DESIGN.html">DESIGN</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/box_reap.html">box.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/description.html">description</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/version.html">version</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/notes_reap.html">notes.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/contact.html">contact</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/testunit_reap.html">testunit.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/released.html">released</a></li>
        
          <li class="file"><a href="../../../files/HISTORY.html">HISTORY</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/vclog_reap.html">vclog.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/meta/package.html">package</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/autotools_reap.html">autotools.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/HISTORY.html">HISTORY</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/task/stats_reap.html">stats.reap</a></li>
        
          <li class="file"><a href="../../../files/lib/plugin/sow/seeds/syckle/README_till.html">README.till</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../../../assets/icon/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="module"><a href="../../../classes/Syckle.html">Syckle</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Application.html">Syckle::Application</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/CLI.html">Syckle::CLI</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Config.html">Syckle::Config</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Emailer.html">Syckle::Emailer</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/IO.html">Syckle::IO</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/LifeCycle.html">Syckle::LifeCycle</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Log.html">Syckle::Log</a></li>
        
          <li class="module"><a href="../../../classes/Syckle/Plugins.html">Syckle::Plugins</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Autotools.html">Syckle::Plugins::Autotools</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Custom.html">Syckle::Plugins::Custom</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/EMail.html">Syckle::Plugins::EMail</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/GemCutter.html">Syckle::Plugins::GemCutter</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Grancher.html">Syckle::Plugins::Grancher</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/RCov.html">Syckle::Plugins::RCov</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/RDoc.html">Syckle::Plugins::RDoc</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/RIDoc.html">Syckle::Plugins::RIDoc</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/RSpec.html">Syckle::Plugins::RSpec</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/RubyProf.html">Syckle::Plugins::RubyProf</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Stats.html">Syckle::Plugins::Stats</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Syntax.html">Syckle::Plugins::Syntax</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Testrb.html">Syckle::Plugins::Testrb</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Turn.html">Syckle::Plugins::Turn</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Plugins/Yard.html">Syckle::Plugins::Yard</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Script.html">Syckle::Script</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Service.html">Syckle::Service</a></li>
        
          <li class="class"><a href="../../../classes/Syckle/Shell.html">Syckle::Shell</a></li>
        
          <li class="module"><a href="../../../classes/<.html"><</a></li>
        
          <li class="class"><a href="../../../classes/Hash.html">Hash</a></li>
        
          <li class="class"><a href="../../../classes/NilClass.html">NilClass</a></li>
        
          <li class="class"><a href="../../../classes/String.html">String</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>
    </div>

    <div id="validator-badges">
      
      <div style="float: right; margin-right: 5px;">
        <a href="http://validator.w3.org/check/referer"><img src="../../../assets/icon/check.png" alt="[Validate]" height="16" width="16" /></a>
      </div>
      Generated with <a href="http://github.com/proutils/webri">WebRI Redfish</a> 1.0.0
      <br/><br/>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      

      <h1><a href="RubyProf.html">RubyProf</a> Profiling Plugin</h1>
<p>
This is a service plugin for ruby-prof command line tool.
</p>

    </div>

    <!-- Constants -->
    
    <div id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt><a name="DEFAULT_SCRIPTS">DEFAULT_SCRIPTS</a></dt>
        
        <dd class="description"><p>
Default script files to run via ruby-prof.
</p></dd>
        
      
      </dl>
    </div>
    

    <!-- Attributes -->
    
    <div id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="scripts-attribute-method" class="method-detail">
        <a name="scripts"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">scripts</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
Pattern of script files to run for coverage check. Usually these are your
test files, but they can be any ruby scripts. By default this is includes
.rb file in the test/ directory whose name begins with test_ or ends with
_test.
</p>
        
        </div>
      </div>
      
      <div id="output-attribute-method" class="method-detail">
        <a name="output"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">output</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
Output directory. This defaults to an rubyprof/ folder in the the
project&#8217;s log directory.
</p>
        
        </div>
      </div>
      
      <div id="options-attribute-method" class="method-detail">
        <a name="options"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">options</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
Additional commandline options string passed to ruby-prof.
</p>
        
        </div>
      </div>
      
    </div>
    

    <!-- Methods -->
    
    <div id="public-instance-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="analyize-method" class="method-detail ">
        <a name="M000072"></a>

        <div class="method-heading">
        
          <span class="method-name">analyize</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
<a href="../Shell.html">Shell</a> out to ruby-prof.
</p>
<p>
TODO: Need to create an index.html file to link to all the others.
</p>
          

          
          <div class="method-source-code"
            id="analyize-source">
<pre>
<span class="ruby-comment cmt"># File lib/plugin/syckle/rubyprof.rb, line 39</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">analyize</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">scripts</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>[<span class="ruby-identifier">s</span>] }.<span class="ruby-identifier">flatten</span>
      <span class="ruby-comment cmt"># create output directory if needed</span>
      <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">output</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">output</span>)
      <span class="ruby-comment cmt"># if nothing is out-of-date</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">outofdate?</span>(<span class="ruby-identifier">output</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">files</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">force?</span>
        <span class="ruby-comment cmt"># make a profile for each script</span>
        <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">fname</span> = <span class="ruby-identifier">output</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;#{File.basename(file)}.html&quot;</span>
          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">outofdate?</span>(<span class="ruby-identifier">output</span>, <span class="ruby-identifier">file</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">force?</span>
            <span class="ruby-identifier">sh</span> <span class="ruby-node">&quot;ruby-prof #{options} -m 1 -p graph_html -f #{fname} #{file}&quot;</span>
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">report</span> <span class="ruby-node">&quot;ruby-prof updated (at #{output.sub(Dir.pwd,'')})&quot;</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">report</span> <span class="ruby-node">&quot;ruby-prof is current (at #{output.sub(Dir.pwd,'')})&quot;</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="clean-method" class="method-detail ">
        <a name="M000074"></a>

        <div class="method-heading">
        
          <span class="method-name">clean</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Remove output directory and it&#8217;s contents.
</p>
          

          
          <div class="method-source-code"
            id="clean-source">
<pre>
<span class="ruby-comment cmt"># File lib/plugin/syckle/rubyprof.rb, line 67</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clean</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">output</span>)
        <span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">output</span>)
        <span class="ruby-identifier">status</span> <span class="ruby-node">&quot;removed #{output}&quot;</span> <span class="ruby-comment cmt">#unless trial?</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="initialize-defaults-method" class="method-detail ">
        <a name="M000071"></a>

        <div class="method-heading">
        
          <span class="method-name">initialize_defaults</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="initialize-defaults-source">
<pre>
<span class="ruby-comment cmt"># File lib/plugin/syckle/rubyprof.rb, line 30</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_defaults</span>
      <span class="ruby-ivar">@output</span>  = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">log</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'rubyprof'</span>
      <span class="ruby-ivar">@scripts</span> = <span class="ruby-constant">DEFAULT_SCRIPTS</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="reset-method" class="method-detail ">
        <a name="M000073"></a>

        <div class="method-heading">
        
          <span class="method-name">reset</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Reset output directory, ie. set mtime to oldest date possible.
</p>
          

          
          <div class="method-source-code"
            id="reset-source">
<pre>
<span class="ruby-comment cmt"># File lib/plugin/syckle/rubyprof.rb, line 59</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">output</span>)
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">output</span>)
        <span class="ruby-identifier">report</span> <span class="ruby-node">&quot;reset #{output}&quot;</span> <span class="ruby-comment cmt">#unless trial?</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</main>
</body>
</html>

