<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Syckle::Plugins::RCov</title>

	<link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../plug/syckle/services/rcov_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="plug/syckle/services/rcov.rb">plug/syckle/services/rcov.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">Service</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#M000155">#analyize</a></li>
					
					<li><a href="#M000158">#clean</a></li>
					
					<li><a href="#M000153">#initialize_defaults</a></li>
					
					<li><a href="#M000156">#reset</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../COPYING.html">COPYING</a></li>
				
					<li class="file"><a href="../../HISTORY.html">HISTORY</a></li>
				
					<li class="file"><a href="../../NOTES_rdoc.html">NOTES.rdoc</a></li>
				
					<li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
				
					<li class="file"><a href="../../TODO.html">TODO</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../Syckle.html">Syckle</a></li>
				
					<li><a href="../../Syckle/Application.html">Syckle::Application</a></li>
				
					<li><a href="../../Syckle/CLI.html">Syckle::CLI</a></li>
				
					<li><a href="../../Syckle/Config.html">Syckle::Config</a></li>
				
					<li><a href="../../Syckle/Config/TMP.html">Syckle::Config::TMP</a></li>
				
					<li><a href="../../Syckle/IO.html">Syckle::IO</a></li>
				
					<li><a href="../../Syckle/LifeCycle.html">Syckle::LifeCycle</a></li>
				
					<li><a href="../../Syckle/Log.html">Syckle::Log</a></li>
				
					<li><a href="../../Syckle/Plugins.html">Syckle::Plugins</a></li>
				
					<li><a href="../../Syckle/Plugins/Autotools.html">Syckle::Plugins::Autotools</a></li>
				
					<li><a href="../../Syckle/Plugins/Custom.html">Syckle::Plugins::Custom</a></li>
				
					<li><a href="../../Syckle/Plugins/EMail.html">Syckle::Plugins::EMail</a></li>
				
					<li><a href="../../Syckle/Plugins/Grancher.html">Syckle::Plugins::Grancher</a></li>
				
					<li><a href="../../Syckle/Plugins/RCov.html">Syckle::Plugins::RCov</a></li>
				
					<li><a href="../../Syckle/Plugins/RDoc.html">Syckle::Plugins::RDoc</a></li>
				
					<li><a href="../../Syckle/Plugins/RIDoc.html">Syckle::Plugins::RIDoc</a></li>
				
					<li><a href="../../Syckle/Plugins/RSpec.html">Syckle::Plugins::RSpec</a></li>
				
					<li><a href="../../Syckle/Plugins/RubyProf.html">Syckle::Plugins::RubyProf</a></li>
				
					<li><a href="../../Syckle/Plugins/Rubyforge.html">Syckle::Plugins::Rubyforge</a></li>
				
					<li><a href="../../Syckle/Plugins/Stats.html">Syckle::Plugins::Stats</a></li>
				
					<li><a href="../../Syckle/Plugins/Syntax.html">Syckle::Plugins::Syntax</a></li>
				
					<li><a href="../../Syckle/Plugins/Testrb.html">Syckle::Plugins::Testrb</a></li>
				
					<li><a href="../../Syckle/Plugins/Till.html">Syckle::Plugins::Till</a></li>
				
					<li><a href="../../Syckle/Plugins/Turn.html">Syckle::Plugins::Turn</a></li>
				
					<li><a href="../../Syckle/Plugins/VClog.html">Syckle::Plugins::VClog</a></li>
				
					<li><a href="../../Syckle/Plugins/Yard.html">Syckle::Plugins::Yard</a></li>
				
					<li><a href="../../Syckle/Script.html">Syckle::Script</a></li>
				
					<li><a href="../../Syckle/Service.html">Syckle::Service</a></li>
				
					<li><a href="../../Syckle/Syckfile.html">Syckle::Syckfile</a></li>
				
					<li><a href="../../Syckle/Syckfile/Entry.html">Syckle::Syckfile::Entry</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Syckle::Plugins::RCov</h1>

		<div id="description">
			<h1><a href="RCov.html">RCov</a> <a href="../Service.html">Service</a></h1>
<p>
<a href="RCov.html">RCov</a> code coverage utility.
</p>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="DEFAULT_SCRIPTS">DEFAULT_SCRIPTS</a></dt>
				
				<dd class="description"><p>
Default script files to run via rcov.
</p></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		
		<div id="attribute-method-details" class="method-section section">
			<h3 class="section-header">Attributes</h3>

			
			<div id="output-attribute-method" class="method-detail">
				<a name="output"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">output</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
Output directory. This defaults to an rcov/ folder in the the
project&#8217;s log directory.
</p>
				
				</div>
			</div>
			
			<div id="scripts-attribute-method" class="method-detail">
				<a name="scripts"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">scripts</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
Pattern of script files to run for coverage check. Usually these are your
test files, but they can be any ruby scripts. By default this is includes
.rb file in the test/ directory whose name begins with test_ or ends with
_test.
</p>
				
				</div>
			</div>
			
			<div id="options-attribute-method" class="method-detail">
				<a name="options"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">options</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
Additional commandline options string passed to rcov.
</p>
				
				</div>
			</div>
			
		</div>
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="analyize-method" class="method-detail ">
				<a name="M000155"></a>

				<div class="method-heading">
				
					<span class="method-name">analyize</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Shell out to rcov.
</p>
					

					
					<div class="method-source-code"
						id="analyize-source">
<pre>
<span class="ruby-comment cmt"># File plug/syckle/services/rcov.rb, line 37</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">analyize</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">scripts</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>[<span class="ruby-identifier">s</span>] }.<span class="ruby-identifier">flatten</span>
      <span class="ruby-comment cmt"># create output directory if needed</span>
      <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">output</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">output</span>)
      <span class="ruby-comment cmt"># if nothing is out-of-date</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">outofdate?</span>(<span class="ruby-identifier">output</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">files</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">force?</span>
        <span class="ruby-identifier">sh</span> <span class="ruby-node">&quot;rcov #{options} -t -o #{output} #{files.join(' ')}&quot;</span>
        <span class="ruby-identifier">report</span> <span class="ruby-node">&quot;rcov updated (at #{output.sub(Dir.pwd,'')})&quot;</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">report</span> <span class="ruby-node">&quot;rcov is current (at #{output.sub(Dir.pwd,'')})&quot;</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="clean-method" class="method-detail ">
				<a name="M000158"></a>

				<div class="method-heading">
				
					<span class="method-name">clean</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Remove output directory and it&#8217;s contents.
</p>
					

					
					<div class="method-source-code"
						id="clean-source">
<pre>
<span class="ruby-comment cmt"># File plug/syckle/services/rcov.rb, line 59</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clean</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">output</span>)
        <span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">output</span>)
        <span class="ruby-identifier">status</span> <span class="ruby-node">&quot;removed #{output}&quot;</span> <span class="ruby-comment cmt">#unless dryrun?</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="initialize-defaults-method" class="method-detail ">
				<a name="M000153"></a>

				<div class="method-heading">
				
					<span class="method-name">initialize_defaults</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
TODO: Default scripts must be improved. How?
</p>
<pre>
      esp. how to use Quarry?
</pre>
					

					
					<div class="method-source-code"
						id="initialize-defaults-source">
<pre>
<span class="ruby-comment cmt"># File plug/syckle/services/rcov.rb, line 31</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_defaults</span>
      <span class="ruby-ivar">@output</span>  = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">log</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'rcov'</span>
      <span class="ruby-ivar">@scripts</span> = <span class="ruby-constant">DEFAULT_SCRIPTS</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="reset-method" class="method-detail ">
				<a name="M000156"></a>

				<div class="method-heading">
				
					<span class="method-name">reset</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Reset output directory, ie. set mtime to oldest date possible.
</p>
					

					
					<div class="method-source-code"
						id="reset-source">
<pre>
<span class="ruby-comment cmt"># File plug/syckle/services/rcov.rb, line 51</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">output</span>)
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">output</span>)
        <span class="ruby-identifier">report</span> <span class="ruby-node">&quot;reset #{output}&quot;</span> <span class="ruby-comment cmt">#unless dryrun?</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

